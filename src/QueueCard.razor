@inherits EventsPanelCardAbstract<EventsPanelQueueCard>
<MudPaper Class="pa-1">

    <MudGrid Spacing="2">
        <MudItem xs="2" sm="2" md="2" Class="d-flex flex-column align-self-center justify-center">
            <MudTooltip Text="@Content!.Key">
                <MudAvatar Size="Size.Small" Class="queue-avatar">
                    <MudImage Src="@GetAvatarSrc()"></MudImage>
                </MudAvatar>
            </MudTooltip>
        </MudItem>
        <MudItem xs="8" sm="8" md="8" Class="d-flex align-items-center">
            @if (Card.IsMonitored)
            {
                <MudText Class="queue-label">
                    @Card.Label
                    ::
                    <MudTooltip Text="Agentes">
                        @Content!.Agents.Count
                    </MudTooltip>

                    <MudTooltip Text="Chamadas em espera">
                        @Content!.Calls
                    </MudTooltip>
                </MudText>
            }
            else
            {
                <MudText Class="queue-label">
                    @Card.Label
                </MudText>
            }
        </MudItem>
        <MudItem xs="2" sm="2" md="2" Class="d-flex justify-end align-self-center">
            @if (CanToggle)
            {
                <MudIconButton Icon="@Icons.Material.Filled.SupportAgent" Size="Size.Small" OnClick="OnToggleClicked"></MudIconButton>
            }
        </MudItem>
    </MudGrid>

    @if (ShowAgents)
    {
        <CascadingValue Value="this">
            <MudDivider></MudDivider>
            <MudStack Spacing="0" AlignItems="AlignItems.Center">
                <QueueCardAgents Items=@Content!.Agents ClientCode="@Card.Label"></QueueCardAgents>
            </MudStack>
        </CascadingValue>
    }

    @if (Card.Channels.Any())
    {
        <MudDivider Class="" />
        <CardChannels Channels=@Card.Channels Kind="@EventsPanelCardKind.QUEUE" ClientCode="@Card.Label"></CardChannels>
    }

</MudPaper>
